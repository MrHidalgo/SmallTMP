include ../../../src/listPages

doctype html
html(lang="en")

  head

    title!= project

    link(rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/reseter.css/2.0.0/reseter.min.css' integrity='sha512-gCJkkUMGTe73+FMwog6gIBCVJIMXRoc21l6/IPCuzxCex/1sxvO8ctb6Zd4/WWs2UMqmtnDrAdhJht5pEY0LXg==' crossorigin='anonymous' referrerpolicy='no-referrer')
    link(rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css' integrity='sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w==' crossorigin='anonymous' referrerpolicy='no-referrer')

    link(rel='preconnect' href='https://fonts.googleapis.com')
    link(rel='preconnect' href='https://fonts.gstatic.com' crossorigin='')
    link(href='https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300;400;700&family=Sedgwick+Ave&display=swap' rel='stylesheet')

    style(type="text/css").
      html,
      body {
        overflow: hidden;
        width: 100%;
        min-height: 100vh;
      }
      html {
        -ms-overflow-style: scrollbar;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      }

      body {
        overflow: hidden;
        position: relative;
        display: flex;
        flex-direction: column;
        margin: 0;
        padding: 0;
        background-color: #fff;
        line-height: 1.42857143;
        font-size: 14px;
        font-weight: normal;
        letter-spacing: -0.4px;
        font-family: 'Roboto Condensed', sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      * {
        box-sizing: border-box;
      }
      *:before,
      *:after {
        box-sizing: border-box;
      }
      p,
      h1, h2, h3, h4, h5, h6,
      hr {
        margin: 0;
        padding: 0;
      }

      ul {
        margin: 0;
        padding: 0;
      }

      .main {
        display: flex;
      }
      .main__header {
        z-index: 999;
        overflow: hidden;
        position: fixed;
        top: 0;
        left: 0;
        display: flex;
        width: 100%;
        height: 90px;
        border-bottom: 1px solid #0091EA;
      }
      .main__header-left {
        position: relative;
        display: flex;
        align-items: center;
        width: 100%;
        max-width: 320px;
        padding: 20px 0 20px 20px;
        background-color: #0091EA;
      }
      .main__header-left:after {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        width: 55px;
        height: 100%;
        transform: translateX(100%);
        background-color: #0091EA;
        clip-path: polygon(0 0, 0% 100%, 100% 100%);
      }
      .main__header-right {
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex: 1;
        min-width: 1px;
        max-width: 100%;
        padding: 20px 20px 20px 55px;
      }
      .main__header-right .time {
        font-weight: 500;
        font-size: 16px;
        text-transform: capitalize;
      }
      .main__header-right .time span {
        display: block;
        font-weight: 600;
      }
      .main__wrapper {
        display: flex;
        width: 100%;
        height: 100vh;
        max-height: 100vh;
        padding-top: 90px;
      }
      .main__wrapper-left {
        overflow: hidden;
        overflow-y: auto;
        width: 320px;
        padding: 20px 0 20px 20px;
        min-height: 100%;
      }
      .main__wrapper-right {
        position: relative;
        flex: 1;
        min-width: 1px;
        max-width: 100%;
        min-height: 100%;
        padding: 20px;
      }
      .main__title {
        position: relative;
        top: -3px;
        color: #ffffff;
        font-weight: 400;
        line-height: 0.8;
        font-family: 'Sedgwick Ave', cursive;
        font-size: 30px;
      }
      .main__container {
        position: absolute;
        top: 20px;
        left: 20px;
        width: calc(100% - 40px);
        height: calc(100% - 40px);
      }
      .main__container iframe {
        display: block;
        width: 100%;
        height: 100%;
        margin: 0 auto;
        padding: 0;
        transform-origin: 0 0;
        box-shadow: 0 5px 15px 0 rgba(0,0,0, 0.15);
      }
      .main__nav {
        display: flex;
        align-items: center;
      }
      .main__nav a {
        position: relative;
        display: flex;
        align-items: center;
        height: 50px;
        padding: 5px 15px 5px 7px;
        margin-right: 10px;
        text-decoration: none;
        color: #333333;
        transition: color 0.3s ease-in-out;
      }
      .main__nav a:hover:after {
        border-color: #0091EA;
        box-shadow: 0 5px 15px 0 rgba(0, 0, 0, 0.1);
        transition: border-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out, background-color 0.3s ease-in-out;
      }
      .main__nav a.is-active {
        color: #ffffff;
        transition: color 0.3s ease-in-out;
      }
      .main__nav a.is-active svg {
        fill: #fff;
        transition: fill 0.3s ease-in-out;
      }
      .main__nav a.is-active:after {
        border-color: #0091EA;
        background-color: #0091EA;
        box-shadow: 0 5px 15px 0 rgba(0,0,0, 0.1);
        transition: border-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out, background-color 0.3s ease-in-out;
      }
      .main__nav a:after {
        content: '';
        z-index: 0;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: 1px solid rgba(0,0,0, 0.1);
        background-color: transparent;
        box-shadow: 0 5px 15px 0 rgba(0,0,0, 0);
        transform: skewX(32deg);
        transition: border-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out, background-color 0.3s ease-in-out;
      }
      .main__nav a > div:nth-child(1) svg,
      .main__nav a > div:nth-child(2) p,
      .main__nav a > div:nth-child(2) span {
        z-index: 2;
        position: relative;
      }
      .main__nav a > div:nth-child(1) svg {
        transition: fill 0.3s ease-in-out;
      }
      .main__nav a > div:nth-child(1) {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 30px;
      }
      .main__nav a > div:nth-child(2) p {
        font-weight: 700;
        line-height: 1;
      }
      .main__nav a > div:nth-child(2) span {
        font-weight: 500;
        line-height: 1;
        font-size: 12px;
        text-transform: uppercase;
      }
      .main__item-wrapper {
        display: flex;
        flex-direction: column;
      }
      .main__item-container {
        display: flex;
        flex-direction: column;
        padding-bottom: 15px;
      }
      .main__item-container.is-finished .main__item-progress span {
        background-color: #02b64a;
      }
      .main__item-container.is-testing .main__item-progress span {
        background-color: #ffa900;
      }
      .main__item-container.is-developing .main__item-progress span {
        background-color: #0091EA;
      }
      .main__item {
        outline: none;
        cursor: pointer;
        position: relative;
        display: flex;
        align-items: center;
        width: 100%;
        min-height: 45px;
        padding: 0 5px;
        margin: 0;
        border: none;
        border-radius: 0;
        box-shadow: none;
        background-color: transparent;
      }
      .main__item span,
      .main__item p {
        font-size: 18px;
      }
      .main__item span {
        display: flex;
        align-items: center;
        width: 25px;
      }
      .main__item p {
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
        flex: 1;
        min-width: 1px;
        max-width: 100%;
        text-align: left;
        font-weight: 600;
        text-decoration: underline;
      }
      .main__item-target {
        display: flex;
        align-items: center;
        justify-content: flex-end;
        width: 20px;
        height: 20px;
      }
      .main__item-target svg {
        display: block;
        width: 15px;
        height: 15px;
      }
      .main__item-progress {
        position: relative;
        width: 100%;
        height: 5px;
        margin-bottom: 15px;
        border-radius: 2px;
        background-color: rgba(0,0,0, 0.1);
      }
      .main__item-progress span {
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        border-radius: 2px;
      }
      .main__item-progress:before,
      .main__item-progress:after {
        position: absolute;
        top: calc(100% + 2px);
        font-size: 11px;
        font-weight: 500;
        color: #000;
      }
      .main__item-progress:before {
        content: attr(data-name) attr(data-min) ']';
        left: 5px;
      }
      .main__item-progress:after {
        content: '100%';
        right: 5px;
      }
  body

    main#main.main
      .main__header
        .main__header-left

          h1.main__title!= project

        .main__header-right
          div
            p.time last update:
              span#time

            script.
              document.getElementById('time').innerText = new Date().toLocaleString();

          div

            .main__nav
              a(href="#" data-width='320')
                div
                  svg(width='13' height='22' viewBox='0 0 13 22')
                    path(d='M10.5 0h-8A2.5 2.5 0 0 0 0 2.5v17A2.5 2.5 0 0 0 2.5 22h8a2.5 2.5 0 0 0 2.5-2.5v-17A2.5 2.5 0 0 0 10.5 0zm-4 21c-.83 0-1.5-.67-1.5-1.5S5.67 18 6.5 18s1.5.67 1.5 1.5S7.33 21 6.5 21zm4.5-4H2V3h9v14z' fill-rule='evenodd')
                div
                  p Extra Mobile
                  span 320px
              a(href="#" data-width='414')
                div
                  svg(width='13' height='22' viewBox='0 0 13 22')
                    path(d='M10.5 0h-8A2.5 2.5 0 0 0 0 2.5v17A2.5 2.5 0 0 0 2.5 22h8a2.5 2.5 0 0 0 2.5-2.5v-17A2.5 2.5 0 0 0 10.5 0zm-4 21c-.83 0-1.5-.67-1.5-1.5S5.67 18 6.5 18s1.5.67 1.5 1.5S7.33 21 6.5 21zm4.5-4H2V3h9v14z' fill-rule='evenodd')
                div
                  p Mobile
                  span 414px
              a(href="#" data-width='768')
                div
                  svg(width='19' height='24' viewBox='0 0 19 24')
                    path(d='M16.5 0h-14A2.5 2.5 0 0 0 0 2.5v19A2.5 2.5 0 0 0 2.5 24h14a2.5 2.5 0 0 0 2.5-2.5v-19A2.5 2.5 0 0 0 16.5 0zm-7 23c-.83 0-1.5-.67-1.5-1.5S8.67 20 9.5 20s1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm7.5-4H2V3h15v16z' fill-rule='evenodd')
                div
                  p Tablet
                  span 768px
              a(href="#" data-width='1280')
                div
                  svg(width='24' height='17' viewBox='0 0 24 17')
                    path(d='M20 15c1.1 0 1.99-.9 1.99-2L22 2c0-1.1-.9-2-2-2H4C2.9 0 2 .9 2 2v11c0 1.1.9 2 2 2H0c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2h-4zM4 2h16v11H4V2zm8 14c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z' fill-rule='evenodd')
                div
                  p Desktop
                  span 1280px
              a.is-active(href="#" data-width='1440')
                div
                  svg(width='24' height='17' viewBox='0 0 24 17')
                    path(d='M20 15c1.1 0 1.99-.9 1.99-2L22 2c0-1.1-.9-2-2-2H4C2.9 0 2 .9 2 2v11c0 1.1.9 2 2 2H0c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2h-4zM4 2h16v11H4V2zm8 14c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z' fill-rule='evenodd')
                div
                  p Desktop
                  span 1440px
              a(href="#" data-width='1920')
                div
                  svg(width='22' height='20' viewBox='0 0 22 20')
                    path(d='M20 0H2C.9 0 0 .9 0 2v12c0 1.1.9 2 2 2h7l-2 3v1h8v-1l-2-3h7c1.1 0 2-.9 2-2V2c0-1.1-.9-2-2-2zm0 12H2V2h18v10z' fill-rule='evenodd')
                div
                  p Desktop HD
                  span 1920px

      .main__wrapper
        .main__wrapper-left

          .main__item-wrapper
            each val, idx in pages
              .main__item-container(class!= (Number(pages[idx].progress) >= 100)?'is-finished':(Number(pages[idx].progress) >= 80 && Number(pages[idx].progress) <= 99)?'is-testing':(Number(pages[idx].progress) >= 1 && Number(pages[idx].progress) <= 79)?'is-developing':'')
                button.main__item(type='button' data-href!= pages[idx].href disabled!= (pages[idx].progress === '0')? true : false)
                  span!= (idx + 1) + "."
                  p!= pages[idx].name
                  a.main__item-target(href!= pages[idx].href target='_blank')
                    svg(width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg")
                      path(d="M21.9805 0.990234C21.9432 0.991412 21.906 0.994672 21.8691 1H16C15.8675 0.998126 15.7359 1.02261 15.613 1.07202C15.49 1.12143 15.3781 1.1948 15.2837 1.28784C15.1893 1.38088 15.1144 1.49176 15.0632 1.61401C15.0121 1.73627 14.9858 1.86747 14.9858 2C14.9858 2.13252 15.0121 2.26373 15.0632 2.38599C15.1144 2.50824 15.1893 2.61912 15.2837 2.71216C15.3781 2.8052 15.49 2.87857 15.613 2.92798C15.7359 2.97739 15.8675 3.00187 16 3H19.5859L9.29297 13.293C9.19699 13.3851 9.12037 13.4955 9.06758 13.6176C9.0148 13.7397 8.98691 13.8712 8.98556 14.0042C8.9842 14.1373 9.00941 14.2692 9.0597 14.3924C9.10999 14.5156 9.18435 14.6275 9.27843 14.7216C9.37251 14.8156 9.48441 14.89 9.60759 14.9403C9.73077 14.9906 9.86274 15.0158 9.99578 15.0144C10.1288 15.0131 10.2603 14.9852 10.3824 14.9324C10.5045 14.8796 10.6149 14.803 10.707 14.707L21 4.41406V8C20.9981 8.13251 21.0226 8.26407 21.072 8.38704C21.1214 8.51001 21.1948 8.62193 21.2878 8.7163C21.3809 8.81067 21.4918 8.88561 21.614 8.93676C21.7363 8.9879 21.8675 9.01424 22 9.01424C22.1325 9.01424 22.2637 8.9879 22.386 8.93676C22.5082 8.88561 22.6191 8.81067 22.7122 8.7163C22.8052 8.62193 22.8786 8.51001 22.928 8.38704C22.9774 8.26407 23.0019 8.13251 23 8V2.12695C23.0199 1.98298 23.0082 1.83639 22.9657 1.6974C22.9232 1.55841 22.8509 1.43036 22.7538 1.32216C22.6568 1.21396 22.5373 1.12821 22.4038 1.07089C22.2702 1.01356 22.1258 0.986039 21.9805 0.990234ZM2 5C0.906937 5 0 5.90694 0 7V22C0 23.0931 0.906937 24 2 24H17C18.0931 24 19 23.0931 19 22V9.42188L17 11.4219V22H2V7H12.5781L14.5781 5H2Z" fill="black")
                .main__item-progress(data-min!= pages[idx].progress + '%' data-name!= (Number(pages[idx].progress) == 0)?'[':(Number(pages[idx].progress) >= 100)?'Finished - [':(Number(pages[idx].progress) >= 80 && Number(pages[idx].progress) <= 99)?'Testing & Reviewing... - [':(Number(pages[idx].progress) >= 1 && Number(pages[idx].progress) <= 50)?'Desktop Developing... - [':(Number(pages[idx].progress) >= 1 && Number(pages[idx].progress) <= 79)?'Mobile Developing... - [':'')
                  span(style='width:' + pages[idx].progress + '%;')

        .main__wrapper-right
          .main__container#previewWrapper
            iframe#preview(frameborder='0' src!= pages[0].href)

    script.
      const iframe = document.getElementById("preview");
      const previewWrapper = document.getElementById("previewWrapper");

      function setIframeWidth() {
        let pwidth = previewWrapper.offsetWidth;
        let pheight = previewWrapper.offsetHeight;

        let iwidth = iframe.offsetWidth;
        let iheight = iframe.offsetHeight;

        let scaleV = pheight / iheight;
        let scaleH = pwidth / iwidth;

        if (scaleH > 1) scaleH = 1;

        iframe.style.transform = "scale(" + scaleH + ")";
        iframe.style.height = pheight / scaleH + "px";

        let realheight = iframe.getBoundingClientRect().height;

        if (realheight > pheight) iframe.style.transform = "scale(" + scaleV + ")";
      }

      for(let i = 0; i < document.querySelectorAll('.main__nav a').length; i++) {
        document.querySelectorAll('.main__nav a')[i].addEventListener('click', (ev) => {
          for(let j = 0; j < document.querySelectorAll('.main__nav a').length; j++) document.querySelectorAll('.main__nav a')[j].classList.remove('is-active');

          ev.currentTarget.classList.add('is-active');

          iframe.style.width = parseInt(ev.currentTarget.getAttribute("data-width")) + 'px';

          setIframeWidth();
        }, false);
      }

      for(let i = 0; i < document.querySelectorAll('.main__item').length; i++) {
        document.querySelectorAll('.main__item')[i].addEventListener('click', (ev) => {
          iframe.src = ev.currentTarget.getAttribute('data-href');
        }, false);
      }

      setIframeWidth();
      window.addEventListener("resize", () => setIframeWidth());

